<br>
<app-nav-bar-seller></app-nav-bar-seller>
<br>

<!-- ุงูุจุญุซ -->
<div class="search-bar">
  <input [(ngModel)]="searchText" placeholder="๐ ุงุจุญุซ ุจุงุณู ุงูููุชุฌ..." />
</div>

<!-- ูุงุฆูุฉ ุงูููุชุฌุงุช -->
<div *ngIf="filteredProducts.length; else noProducts" class="product-list">
  <mat-card *ngFor="let product of filteredProducts" class="product-card">
    
    <!-- ุตูุฑ ุงูููุชุฌ (ุณูุงูุฏุฑ) -->
    <div *ngIf="getAllImageUrls(product).length > 0" class="image-slider">
      <button class="prev-btn" (click)="prevImage(product)">&#10094;</button>
      <img [src]="getAllImageUrls(product)[product.currentIndex || 0]" alt="ุตูุฑุฉ ุงูููุชุฌ" />
      <button class="next-btn" (click)="nextImage(product)">&#10095;</button>
    </div>

    <!-- ุชูุงุตูู ุงูููุชุฌ -->
    <mat-card-content class="product-content">
      <h3 class="product-title">{{ product.name }}</h3>
      <p class="product-subtitle">{{ product.description }}</p>

<p class="price">
  <!-- ูู ูู ุฏูุณูููุช -->
  <ng-container *ngIf="product.discounted_price!=0 ; else basePrice">
    <span class="old">{{ product.price }} ุฌ</span><br>
    <span class="new">{{ product.discounted_price }} ุฌ</span>
  </ng-container>

  <!-- ูู ูููุด ุฏูุณูููุช -->
  <ng-template #basePrice>
    <span class="base">{{ product.price }} ุฌ</span>
  </ng-template>
</p>

      <p><strong>ุงููููุฉ:</strong> {{ product.quantity }}</p>
      <p><strong>ุงููุญู:</strong> {{ product.store_name }}</p>

      <!-- ุงูุฃููุงู -->
     <!-- ุงูุฃููุงู -->
<div *ngIf="product.colors?.length" class="colors">
  <strong>ุงูุฃููุงู:</strong>
  <div class="color-item" *ngFor="let color of product.colors">
    <span class="color-dot" [style.backgroundColor]="color.color"></span>
    <span class="color-name">{{ color.color}}</span>
  </div>
</div>


      <!-- ุงูููุงุณุงุช -->
      <div *ngIf="product.sizes?.length" class="sizes">
        <strong>ุงูููุงุณุงุช:</strong>
        <span *ngFor="let size of product.sizes" class="size-box">{{ size.size }}</span>
      </div>
    </mat-card-content>
    <!-- ุงูุฃุฒุฑุงุฑ -->
    <mat-card-actions class="actions">
      <button mat-raised-button color="primary" (click)="editProduct(product)">โ๏ธ ุชุนุฏูู</button>
      <button mat-raised-button color="warn" (click)="deleteProduct(product.slug)">๐๏ธ ุญุฐู</button>
    </mat-card-actions>
  </mat-card>
</div>

<!-- ูุง ุชูุฌุฏ ููุชุฌุงุช -->
<ng-template #noProducts>
  <div class="no-products">๐ซ ูุง ุชูุฌุฏ ููุชุฌุงุช ูุนุฑุถูุง</div>
</ng-template>

<!-- ุฅุถุงูุฉ ููุชุฌ -->
<div class="add-btn">
  <button mat-raised-button color="accent" (click)="goToAdd()">โ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</button>
</div>

<!-- ุงูุตูุญุงุช -->
<div *ngIf="totalPages >= 1" class="pagination">
  <button mat-stroked-button (click)="previousPage()" [disabled]="currentPage === 1">โฌ๏ธ ุงูุณุงุจู</button>
  <span>ุงูุตูุญุฉ {{ currentPage }} ูู {{ totalPages }}</span>
  <button mat-stroked-button (click)="nextPage()" [disabled]="currentPage === totalPages">ุงูุชุงูู โก๏ธ</button>
</div>
