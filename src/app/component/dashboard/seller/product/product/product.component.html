<br> 
<app-nav-bar-seller></app-nav-bar-seller>
<br>
<div style="text-align: center; margin-bottom: 20px;">
  <input [(ngModel)]="searchText" placeholder="๐ ุงุจุญุซ ุจุงุณู ุงูููุชุฌ..." class="form-control" style="width: 300px; margin: auto;" />
</div>

<div *ngIf="filteredProducts.length; else noProducts" class="product-list" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
  <mat-card *ngFor="let product of filteredProducts" style="width: 350px; background: rgba(255, 255, 255, 0.7); box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
    <mat-card-header>
      <mat-card-title>{{ product.name }}</mat-card-title>
      <mat-card-subtitle>{{ product.description }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <!-- ุตูุฑ ุงูููุชุฌ -->
      <div *ngIf="getAllImageUrls(product).length > 0">
        <img *ngFor="let image of getAllImageUrls(product)"
             [src]="image"
             alt="ุตูุฑุฉ ุงูููุชุฌ"
             style="width: 120px; height: auto; margin: 5px; border-radius: 6px;" />
      </div>

      <p><strong>ุงูุณุนุฑ:</strong> {{ product.price }} ุฌููู</p>
      <p><strong>ุงูุณุนุฑ ุจุนุฏ ุงูุฎุตู:</strong> {{ product.discounted_price }} ุฌููู</p>
      <p><strong>ุงููููุฉ:</strong> {{ product.quantity }}</p>
      <p><strong>ุงุณู ุงุงููุญู :</strong> {{ product.store_name }}</p>

      <!-- ุนุฑุถ ุงูุฃููุงู ููุท ุฅุฐุง ูุงูุช ููุฌูุฏุฉ -->
      <div *ngIf="product.colors?.length">
        <strong>ุงูุฃููุงู:</strong>
        <span *ngFor="let color of product.colors" class="badge" 
              [style.backgroundColor]="color.color" style="margin: 2px 5px; padding: 4px 10px; color: black; border-radius: 6px;">
          {{ color.color }}
        </span>
      </div>

      <!-- ุนุฑุถ ุงูููุงุณุงุช ููุท ุฅุฐุง ูุงูุช ููุฌูุฏุฉ -->
      <div *ngIf="product.sizes?.length">
        <strong>ุงูููุงุณุงุช:</strong>
        <span *ngFor="let size of product.sizes" class="badge"
              style="margin: 2px 5px; padding: 4px 10px; background-color: #9c27b0; color: white; border-radius: 6px;">
          {{ size.size }}
        </span>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button color="primary" (click)="editProduct(product)">โ๏ธ ุชุนุฏูู</button>
      <button mat-button color="warn" (click)="deleteProduct(product.slug)">๐๏ธ ุญุฐู</button>
    </mat-card-actions>
  </mat-card>
</div>

<ng-template #noProducts>
  <div style="text-align: center; margin-top: 50px; color: #888; font-size: 20px;">
    ๐ซ ูุง ุชูุฌุฏ ููุชุฌุงุช ูุนุฑุถูุง
  </div>
</ng-template>

<div style="margin-top: 30px; text-align: center;">
  <button mat-raised-button color="accent" (click)="goToAdd()">โ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</button>
</div>

<div *ngIf="totalPages >= 1" style="text-align: center; margin: 30px auto;">
  <button mat-stroked-button (click)="previousPage()" [disabled]="currentPage === 1">โฌ๏ธ ุงูุณุงุจู</button>

  <span style="margin: 0 15px;">
    ุงูุตูุญุฉ {{ currentPage }} ูู {{ totalPages }}
  </span>

  <button mat-stroked-button (click)="nextPage()" [disabled]="currentPage === totalPages">ุงูุชุงูู โก๏ธ</button>
</div>

<div *ngIf="totalPages > 1" style="text-align: center; margin: 30px auto;">
  <button mat-stroked-button (click)="previousPage()" [disabled]="currentPage === 1">โฌ๏ธ ุงูุณุงุจู</button>

  <ng-container *ngFor="let page of [].constructor(totalPages); let i = index">
    <button mat-button 
            [disabled]="currentPage === i + 1"
            (click)="goToPage(i + 1)">
      {{ i + 1 }}
    </button>
  </ng-container>

  <button mat-stroked-button (click)="nextPage()" [disabled]="currentPage === totalPages">ุงูุชุงูู โก๏ธ</button>
</div>
